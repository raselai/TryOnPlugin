var l;const o=((l=document.currentScript)==null?void 0:l.src)||import.meta.url||"",i="tryon-widget-script",u=o.includes("loader.ts");let n=null;function y(){const t=document.querySelectorAll('script[data-tryon-api], script[src*="loader"]');for(const e of t){const r=e;if(r.dataset.tryonApi||r.dataset.tryonPrivacy)return{apiBaseUrl:r.dataset.tryonApi||void 0,privacyPolicyUrl:r.dataset.tryonPrivacy||void 0}}return{}}function c(){if(u)return o.replace("loader.ts","main.ts");if(o.includes("loader.js"))return o.replace("loader.js","widget.js");try{return new URL("./widget.js",o).href}catch{return"/widget.js"}}function f(t){if(document.getElementById(i)){n&&t();return}if(u){const r=document.createElement("div");r.id=i,r.style.display="none",document.body.appendChild(r),import(c()).then(()=>{n=window.TryOn,t()}).catch(p=>{console.error("[TryOn] Failed to load widget:",p)});return}const e=document.createElement("script");e.id=i,e.src=c(),e.type="module",e.onload=()=>{setTimeout(()=>{n=window.TryOn,t()},0)},e.onerror=()=>console.error("[TryOn] Failed to load widget from:",e.src),document.head.appendChild(e)}const a=y(),s={_ready:!1,open(t){this._ready&&n?n.open(t):(this._pendingOpen=t,f(()=>{n&&(n._init(a),this._ready=!0,this._pendingOpen?(n.open(this._pendingOpen),this._pendingOpen=void 0):n.open())}))},close(){this._ready&&n&&n.close()},_init(t){Object.assign(a,t)}};window.TryOnWidget=s;window.TryOn=s;function d(){document.querySelectorAll("[data-tryon-open]").forEach(e=>{e.dataset.tryonBound!=="true"&&(e.dataset.tryonBound="true",e.addEventListener("click",()=>{const r=e.dataset.tryonProductId;s.open({productId:r})}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d();const g=new MutationObserver(d);g.observe(document.body,{childList:!0,subtree:!0});
