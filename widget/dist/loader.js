var a;const o=((a=document.currentScript)==null?void 0:a.src)||"",i="tryon-widget-script";let r=null;function l(){const e=document.querySelectorAll('script[data-tryon-api], script[data-tryon-api-key], script[src*="loader"]');for(const t of e){const n=t;if(n.dataset.tryonApi||n.dataset.tryonPrivacy||n.dataset.tryonApiKey)return{apiBaseUrl:n.dataset.tryonApi||void 0,privacyPolicyUrl:n.dataset.tryonPrivacy||void 0,apiKey:n.dataset.tryonApiKey||null}}return{}}function p(){return o.includes("loader.ts")?o.replace("loader.ts","main.ts"):o.includes("loader.js")?o.replace("loader.js","widget.js"):new URL("./widget.js",o).href}function y(e){if(document.getElementById(i)){r&&e();return}const t=document.createElement("script");t.id=i,t.src=p(),t.type="module",t.onload=()=>{setTimeout(()=>{r=window.TryOn,e()},0)},t.onerror=()=>console.error("[TryOn] Failed to load widget from:",t.src),document.head.appendChild(t)}const s=l(),c={_ready:!1,open(e){this._ready&&r?r.open(e):(this._pendingOpen=e?{productImage:e.productImage||"",productId:e.productId}:void 0,y(()=>{r&&(r._init(s),this._ready=!0,this._pendingOpen&&(r.open(this._pendingOpen),this._pendingOpen=void 0))}))},close(){this._ready&&r&&r.close()},setProduct(e,t){this._ready&&r&&r.setProduct(e,t)},_init(e){Object.assign(s,e)}};window.TryOn=c;function d(){document.querySelectorAll("[data-tryon-image]").forEach(t=>{t.dataset.tryonBound!=="true"&&(t.dataset.tryonBound="true",t.addEventListener("click",()=>{const n=t.dataset.tryonImage||"",u=t.dataset.tryonId;c.open({productImage:n,productId:u})}))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d();const f=new MutationObserver(d);f.observe(document.body,{childList:!0,subtree:!0});
//# sourceMappingURL=loader.js.map
